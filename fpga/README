# FPGA-проект для поставки BSP к плате Ethond.

Это исходники для прошивки FPGA, которая используется
у нас в Ethond, реализованном на CycloneV с SoC.

Из этих исходников собирается как сама прошивка FPGA,
так и Preloader и U-boot, необходимые для инициализации ARM'а.



## Текущая функциональность

На данный момент поддерживаются следующие функции:
  * Сетевой стек
  * Функция доступна на обоих портах (порты полностью одинаковы)

Ограничения:
  * MTU для сетевого стека равен 1518 байт и не изменяется динамически


## Фильтрация данных на CPU и LB

### Фильтрация на CPU
В прошивке FPGA реализован сетевой стек 
(обработка входных пакетов процессором). Для каждого входного пакета
мы принимаем решение - должен ли он переслаться на CPU, или будет отброшен.
Для этого есть возможность настроить "наш" MAC-адрес (так же известный
как HOST_MAC). 

На CPU идут все пакеты с нашим, мультикастным или 
широковещательным MAC-адресом, которые:
   * не содержат CRC-ошибку
   * не имеют размер меньше 64 или больше 1518 байт



Содержимое каталогов
--------------------

  - hps_isw_handoff/:
      Файлы, из которых в итоге будут собраны Preloader и U-boot.
      (папка появится после компиляции проекта)
  
  - lib/, cge_lib/:
      Основные либы для проектов FPGA.

  - netdma:
      Библиотека Netdma IP core (подробное описание внутри библиотеки)
  
  - megafunctions/ 
      Набор мегафункций (физика, PLL и т.д)

  - mx_csr/        
      Описание интрефейсов управления через регистры

  - src_files/     
      Общие топовые файлы исходников


  - soc_files/
      Файлы, которые используются для сборки soc-модуля:
        - файл soc_*.qsys
        - автосгенеренные в QsyS  *.v, *.sv файлы


